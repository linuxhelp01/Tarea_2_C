#define BTN1   PIN_E0
#define BTN2   PIN_E1
#define BTN3   PIN_E2

int1 estado = 0;   // Estado de algo (LED, modo, etc.)

void conf_button(){
   // Desactivar entradas analógicas: usar todos los pines como digitales
   setup_adc_ports(NO_ANALOGS);
   setup_adc(ADC_OFF);

   // RE0, RE1, RE2 como ENTRADAS (1); resto de RE como salida (0)
   // bit0 -> RE0, bit1 -> RE1, bit2 -> RE2
   set_tris_e(0b00000111);
}

void WaitBoton() {
   // Asumimos botón con pull-up: en reposo = 1, presionado = 0
   while (input(MAX_BOTON)) {
      // espera a que se PRESIONE
   }
   delay_ms(20);  // anti-rebote
   while (!input(MAX_BOTON)) {
      // espera a que se SUELTE
   }
   delay_ms(20);  // anti-rebote
}


void state_boton() {
  WaitBoton();         // Espera a que el usuario presione y suelte

  // Aquí SIEMPRE entras después de un cambio de estado del botón
  estado = !estado;    // Cambias el estado (toggle)

  if (estado) {
    // Código para el estado "ON"
    
  } else {
    
  }
}
