#include <16F877A.h>
#fuses HS,NOWDT,NOPUT,NOLVP,NOPROTECT,BROWNOUT
#use delay(clock=20M)

// Incluimos las librerías necesarias
#include "display_max.c"
#include "Botton.c"     

void main() {
   // 1. Variable para llevar la cuenta
   int8 contador = 0;

   // 2. Inicialización del hardware
   max_init();       // Inicia la pantalla
   conf_button();    // Configura el Puerto E como entrada

   // 3. Mostrar el valor inicial (0) en el primer dígito
   max_send(1, contador);

   // 4. Bucle principal
   while(TRUE) {
      
      // Usamos la función universal pasándole BTN1 (que es PIN_E0)
      if (read_button(BTN1)) { 
         
         contador++;                // Aumentar la cuenta
         if(contador > 9) {         // Si pasa de 9...
            contador = 0;           // ...vuelve a 0
         }

         max_send(1, contador);     // Actualizar la pantalla con el nuevo número
      }
   }
}
